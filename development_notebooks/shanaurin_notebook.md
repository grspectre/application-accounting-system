# Дневник разработчика Шанаурина Антона Александровича

## 2024-02-17 - 2024-03-01, Спринт 1

### 2024-02-19

Вчера провели собрание, пытаясь разобраться, что делать дальше. Спринт по сути не начался, дай бог в среду появится какой-то список задач. Ощущаю, что слишком много времени говорю, в результате получается какая-то импровизированная лекция.

Решили к среде набросать задач, а там можно и за спринт приниматься. Но репозиторий завели, коллабораторов набрали, дело движется.

### 2024-02-25

А вот и не движется. То есть вот вообще. Пока набросал какое-то количество задач, добавил задачи по администрированию сервера, создал сервер, делегировал домены. Дальше буду думать, потому что ничего непонятно. Очевидно, буду создавать документацию о воркфлоу в команде. Первый взгляд и всё такое. Вертолёт не летит, я пока толкаю змею в хвост. Плохо.

### 2024-02-01

В заключении получилось, что что-то начали. Пока из команды что-то делают двое, включая меня. Это немного печалит. Нужно провести ретро и спланировать следующий спринт.

## 2024-03-02 - 2024-03-15, Спринт 2

### 2024-03-09

Праздники не прошли даром, ничего не делал. Не только по проекту, конечно же. Вообще ничего не делал. Сегодня созванивались с Артёмом Кондря, разбирались с тем, как работать в GIT. Вроде даже разобрались.

### 2024-03-13

Создал папку с документацией, описал процесс работы с GIT в первом приближении.

### 2024-03-14

Создал каталог для fastapi, реализовал метод /ping, описал примерный процесс работы с venv. Но, по ощущениям этого будет недостаточно.

### 2024-03-15

Возился с сервером. Пока не очень понятно, но надо что-то простое пока сделать. uvicorn, nginx, хотя бы сред 4 + продакшн. Подумать о докере, хотя мысль о сборке образа угнетает. Я не очень понимаю техпроцесс, надо тренироваться.

### 2024-03-16

Сижу и пишу дневник разработки перед парой. Да, привычка делать всё в последний момент - плохая привычка. Нужно выделить хотя бы полчаса каждый день, поставить задачу об организации коллектива, продумать шаги. Сегодня выделить час на планирование. Или на выходные, как пойдёт. Всё также плохо, движение не наблюдается, видимо, буду пинать. Прямо интересно.

## 2024-03-16 - 2024-03-29, Спринт 3

### 2024-03-29

Посмотрел на то, как всё движется, посмотрел, что происходит на сервере (PHP! Шта?!), психанул, настроил прод (nginx не умеет работать с несколькими пользователями, печаль), настроил одну тестовую среду. Потратил по сути всю пятницу, так делать не надо. Нужно размазывать эти 8 часов на 2 недели. Попробую сделать это в следующий стрим.

## 2024-03-30 - 2024-04-13, Спринт 4

### 2024-03-30

В основном разговаривали. Я решил, что на этой неделе делаем авторизацию. Николай Петров хочет вкатить keycloak, ну а почему бы и да? Как он будет дружить это с нашим бекендом пока не особо понятно, ну а вдруг! Да и получение данных по пользователе и изменение им своих данных в профиле тоже пока непонятно как будет происходить.

Вообще, конечно, инициатором работы с пользователем может быть клиент, но история эта немного странная. То есть по сути внешний клиент знает методы АПИ и знает что-то о пользователе. Бекенд по сути просто что-то сохраняет и что-то возвращает. Даже думать не хочу. 

- Клиент: Я пользователь 1! Вот мой паспорт! (даёт токен, притом вечный токен)
- Бек: У меня нет такого пользователя!
- Клиент: Создай пользователя 1 вот с этими данными!
- Бек: На тебе refresh-токен. Храни его!

Зачем там refresh-токен - непонятно. Обмениваем токен  keycloak на наш быстрый токен (на час или на сутки, не важно) да и всё. Не значаешь токен keycloak - идёшь нафиг создавать нового пользователя. А то ходют тут всякие без пачпорта!

### 2024-03-31

Вкатил локально alembic и даже что-то заработало. По крайней мере сделать upgrade мне удалось. crud пока делать не стал, потому что особой надобности нет, а там кто-нибудь сделает. Или не сделает. Посмотрим, как пойдёт. Пока есть только таблица users.

### 2024-04-01

Выкатил на сервер прод и первую среду разработки. Сломал прод. Починил прод. Написал документацию. Ми-ми-ми.
